

<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../../bower_components/paper-tabs/paper-tab.html">
<link rel="import" href="../../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../../bower_components/etools-ajax/etools-ajax.html">
<link rel="import" href="../../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">


<link   rel="import" href="travel-details.html">
<link   rel="import" href="travel-attachments.html">
<link   rel="import" href="travel-report.html">
<link   rel="import" href="../et2f-header.html">



<link rel="import" href="../../../styles/shared-styles.html">

<dom-module id="travel-edit">
    <template>
        <style include="shared-styles iron-flex iron-flex-alignment iron-flex-factors">
            :host {
                display: block;
                width: 100%;

            }
            paper-tabs {
                background: #FFF;
                color: #000;
            }
            paper-tabs > * {
                --paper-tab-content-unselected: {
                    color: #000;
                };
            }
            *[hidden] {
                display: none;
            }
        </style>

        <etools-ajax url="/mock-data/structure.json" on-success="_handleStructure"></etools-ajax>
        <etools-ajax url="/mock-data/permissions.json" on-success="_handlePermissions"></etools-ajax>
        <etools-ajax url="/mock-data/data.json" on-success="_handleData"></etools-ajax>


        <et2f-header title="Edit travel pan">
            <paper-tabs  scrollable selected="{{selected}}">
                <paper-tab>Travel details</paper-tab>
                <paper-tab>Attachments</paper-tab>
                <paper-tab>Report</paper-tab>
            </paper-tabs>
        </et2f-header>



        <iron-pages selected="{{selected}}">
            <travel-details structure="[[structure]]" permissions="[[permissions]]" data ="{{data}}"></travel-details>
            <travel-attachments></travel-attachments>
            <travel-report></travel-report>
        </iron-pages>


    </template>

    <script>
        Polymer({
            is: 'travel-edit',
            properties: {
                data: {
                    type: Object,
                    notify: true,
                    reflectToAttribute: true
                },
                selected: {
                    type: Number,
                    value: 0
                },
                structure: {
                    type: Object,
                    value: {},
                    notify: true,
                    reflectToAttribute: false
                }
            },
            _handleStructure: function(event, data) {
                Object.freeze(data);
                this.set('structure', data);
            },
            _handlePermissions: function(e, data) {
                Object.freeze(data);
                this.permissions = data;
            },
            _handleData: function(e, data) {
                Object.freeze(data);
                this.data = data;
            }
        });
    </script>
</dom-module>
